## NodeJS

- 크롬 V8 자바스크립트 엔진으로 Build된 자바스크립트를 런타임(실행)하는 것

  - 런타임: 특정 언어로 만든 프로그램들을 실행할 수 있게 해주는 가상 머신(크롬의 V8 엔진 사용)의 상태

- 내부 : V8과 libuv를 내부적으로 포함한다

  - V8 엔진 : 오픈 소스 자바스크립트 에진 => 속도 문제 개선
  - libuv: 노드의 특성인 이벤트 기반, 논블로킹 I/O 모델을 구현한 라이브러리

  ![image-20220423202221191](nodeJS.assets/image-20220423202221191.png)



##### * 자바스크립트를 왜 Node가 실행해야하는 것일까?

- Node : 자바스크립트로 만든 프로그램을 실행할 수 있게 해준다

- 브라우저가  html을 읽으면서 script source를 같이 읽었다
  - html이 없으면 script를 읽을 수 없다
  - html에 종속되어 있었다
- NodeJs를 설치하면 html상관없이 V8 자바스크립트 엔진으로 script source를 해석해준다
  - Node가 html에대한 종속을 벗어나게 해주었다
  - Node가 자바스크립트의 역할을 확장시켜준다
- Node는 서버가 아니다
  - 자바스크립트로 서버코드를짜면 서버가 되는것
    - 서버 실행을 위해 필요한 http/https/http2 모듈을 제공
  - 서버의 역할도 수행할 수 있는 자바스크립트 런타임
- Node 이전에도 자바스크립트로 런타임을 만들기 위한 많은 시도가 있었으나 엔진 속도 문제로 실패



##### * 이벤트 기반

- 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식

  - ex) 클릭, 네트워크 요청, 타이머 등
  - `event listener` : 이벤트를 등록하는 함수
  - `Callback Function` : 이벤트가 발생했을 때 실행될 함수 

  ![image-20220423202502783](nodeJS.assets/image-20220423202502783.png)



##### * 논블로킹 I/O

- 오래 걸리는 함수를 백그라운드로 보내서 다음 코드가 먼저 실행되게 하고, 나중에 오래 걸리는 함수를 실행

  - 논 블로킹 방식 하에서 일부 코드는 백그라운드에서 병렬로 실행됨
  - 일부 코드 :  I/O 작업(파일 시스템 접근, 네트워크 요청), 압축, 암호화 등
  - 나머지 코드는 블로킹 방식으로 실행됨

  ![image-20220423203319356](nodeJS.assets/image-20220423203319356.png)



##### * 프로세스 & 스레드

- 프로세스 : 운영체제에서 할당하는 작업의 단위, 프로세스 간 자원 공유X

  - 기본적으로 프로그램 하나 띄울 때 프로세스가 한개 이상 뜬다
  - ex) Chrome

- 스레드 : 프로세스 내에서 실행되는 작업의 단위, 부모 프로세스 자원 공유

  - ex) Chrome의 Tab

- 노드 프로세스는 멀티 스레드이지만 직접 다룰 수 있는 스레드는 하나이기 때문에 싱글 스레드라고 표현

- Node는 주로 멀티 스레드 대신 멀티 프로세스 활용

- 14버전부터 멀티 스레드 사용 가능

  ![image-20220423203645007](nodeJS.assets/image-20220423203645007.png)